<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund">
<title>12&nbsp; 논리형 벡터 – R for Data Science (2e)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./numbers.html" rel="next">
<link href="./transform.html" rel="prev">
<link href="./cover.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8df9fc159a2c64db71ab329accd4d345.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script defer="" data-domain="r4ds.hadley.nz" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./transform.html">변형 (Transform)</a></li><li class="breadcrumb-item"><a href="./logicals.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">논리형 벡터</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Data Science (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r4ds/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">환영합니다</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface-2e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">제2판 서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소개</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">전체 게임</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터 시각화</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">워크플로우: 기초</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">데이터 변형</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">워크플로우: 코드 스타일</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">데이터 정리</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">워크플로우: 스크립트와 프로젝트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">데이터 가져오기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">워크플로우: 도움 받기</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">시각화 (Visualize)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">레이어(Layers)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석(Exploratory data analysis)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">소통(Communication)</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">변형 (Transform)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logicals.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">논리형 벡터</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">숫자</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">문자열</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regexps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">정규 표현식 (Regular expressions)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">팩터(Factors)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">날짜와 시간</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missing-values.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">결측값(Missing values)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">조인(Joins)</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">가져오기 (Import)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">스프레드시트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">데이터베이스</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./arrow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Arrow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rectangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">계층적 데이터</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">웹 스크래핑</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">프로그램 (Program)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">함수 (Functions)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">반복</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./base-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">기본 R 필드 가이드</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">소통 (Communicate)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Quarto 형식</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#%EC%86%8C%EA%B0%9C" id="toc-소개" class="nav-link active" data-scroll-target="#%EC%86%8C%EA%B0%9C"><span class="header-section-number">12.1</span> 소개</a>
  <ul class="collapse">
<li><a href="#%EC%84%A0%EC%88%98-%EC%A7%80%EC%8B%9D" id="toc-선수-지식" class="nav-link" data-scroll-target="#%EC%84%A0%EC%88%98-%EC%A7%80%EC%8B%9D"><span class="header-section-number">12.1.1</span> 선수 지식</a></li>
  </ul>
</li>
  <li>
<a href="#%EB%B9%84%EA%B5%90" id="toc-비교" class="nav-link" data-scroll-target="#%EB%B9%84%EA%B5%90"><span class="header-section-number">12.2</span> 비교</a>
  <ul class="collapse">
<li><a href="#sec-fp-comparison" id="toc-sec-fp-comparison" class="nav-link" data-scroll-target="#sec-fp-comparison"><span class="header-section-number">12.2.1</span> 부동 소수점 비교</a></li>
  <li><a href="#sec-na-comparison" id="toc-sec-na-comparison" class="nav-link" data-scroll-target="#sec-na-comparison"><span class="header-section-number">12.2.2</span> 결측값</a></li>
  <li><a href="#is.na" id="toc-is.na" class="nav-link" data-scroll-target="#is.na"><span class="header-section-number">12.2.3</span> <code>is.na()</code></a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C" id="toc-연습문제" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C"><span class="header-section-number">12.2.4</span> 연습문제</a></li>
  </ul>
</li>
  <li>
<a href="#%EB%B6%80%EC%9A%B8-%EB%8C%80%EC%88%98boolean-algebra" id="toc-부울-대수boolean-algebra" class="nav-link" data-scroll-target="#%EB%B6%80%EC%9A%B8-%EB%8C%80%EC%88%98boolean-algebra"><span class="header-section-number">12.3</span> 부울 대수(Boolean algebra)</a>
  <ul class="collapse">
<li><a href="#sec-na-boolean" id="toc-sec-na-boolean" class="nav-link" data-scroll-target="#sec-na-boolean"><span class="header-section-number">12.3.1</span> 결측값</a></li>
  <li><a href="#sec-order-operations-boolean" id="toc-sec-order-operations-boolean" class="nav-link" data-scroll-target="#sec-order-operations-boolean"><span class="header-section-number">12.3.2</span> 연산 순서</a></li>
  <li><a href="#in" id="toc-in" class="nav-link" data-scroll-target="#in"><span class="header-section-number">12.3.3</span> <code>%in%</code></a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-1" id="toc-연습문제-1" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-1"><span class="header-section-number">12.3.4</span> 연습문제</a></li>
  </ul>
</li>
  <li>
<a href="#sec-logical-summaries" id="toc-sec-logical-summaries" class="nav-link" data-scroll-target="#sec-logical-summaries"><span class="header-section-number">12.4</span> 요약(Summaries)</a>
  <ul class="collapse">
<li><a href="#%EB%85%BC%EB%A6%AC%ED%98%95-%EC%9A%94%EC%95%BD" id="toc-논리형-요약" class="nav-link" data-scroll-target="#%EB%85%BC%EB%A6%AC%ED%98%95-%EC%9A%94%EC%95%BD"><span class="header-section-number">12.4.1</span> 논리형 요약</a></li>
  <li><a href="#sec-numeric-summaries-of-logicals" id="toc-sec-numeric-summaries-of-logicals" class="nav-link" data-scroll-target="#sec-numeric-summaries-of-logicals"><span class="header-section-number">12.4.2</span> 논리형 벡터의 숫자 요약</a></li>
  <li><a href="#%EB%85%BC%EB%A6%AC%ED%98%95-%EB%B6%80%EB%B6%84%EC%A7%91%ED%95%A9" id="toc-논리형-부분집합" class="nav-link" data-scroll-target="#%EB%85%BC%EB%A6%AC%ED%98%95-%EB%B6%80%EB%B6%84%EC%A7%91%ED%95%A9"><span class="header-section-number">12.4.3</span> 논리형 부분집합</a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-2" id="toc-연습문제-2" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-2"><span class="header-section-number">12.4.4</span> 연습문제</a></li>
  </ul>
</li>
  <li>
<a href="#%EC%A1%B0%EA%B1%B4%EB%B6%80-%EB%B3%80%ED%99%98" id="toc-조건부-변환" class="nav-link" data-scroll-target="#%EC%A1%B0%EA%B1%B4%EB%B6%80-%EB%B3%80%ED%99%98"><span class="header-section-number">12.5</span> 조건부 변환</a>
  <ul class="collapse">
<li><a href="#if_else" id="toc-if_else" class="nav-link" data-scroll-target="#if_else"><span class="header-section-number">12.5.1</span> <code>if_else()</code></a></li>
  <li><a href="#case_when" id="toc-case_when" class="nav-link" data-scroll-target="#case_when"><span class="header-section-number">12.5.2</span> <code>case_when()</code></a></li>
  <li><a href="#%ED%98%B8%ED%99%98-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9C%A0%ED%98%95" id="toc-호환-가능한-유형" class="nav-link" data-scroll-target="#%ED%98%B8%ED%99%98-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%9C%A0%ED%98%95"><span class="header-section-number">12.5.3</span> 호환 가능한 유형</a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-3" id="toc-연습문제-3" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C-3"><span class="header-section-number">12.5.4</span> 연습문제</a></li>
  </ul>
</li>
  <li><a href="#%EC%9A%94%EC%95%BD" id="toc-요약" class="nav-link" data-scroll-target="#%EC%9A%94%EC%95%BD"><span class="header-section-number">12.6</span> 요약</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hadley/r4ds/edit/main/logicals.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hadley/r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./transform.html">변형 (Transform)</a></li><li class="breadcrumb-item"><a href="./logicals.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">논리형 벡터</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-logicals" class="quarto-section-identifier"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">논리형 벡터</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="소개" class="level2" data-number="12.1"><h2 data-number="12.1" class="anchored" data-anchor-id="소개">
<span class="header-section-number">12.1</span> 소개</h2>
<p>이 장에서는 논리형 벡터(logical vectors)로 작업하는 도구를 배울 것입니다. 논리형 벡터는 각 요소가 <code>TRUE</code>, <code>FALSE</code>, <code>NA</code>의 세 가지 가능한 값 중 하나만 될 수 있기 때문에 가장 단순한 유형의 벡터입니다. 원시 데이터에서 논리형 벡터를 찾는 것은 상대적으로 드물지만, 거의 모든 분석 과정에서 논리형 벡터를 생성하고 조작하게 될 것입니다.</p>
<p>숫자 비교를 통해 논리형 벡터를 만드는 가장 일반적인 방법에 대해 논의하는 것으로 시작하겠습니다. 그런 다음 부울 대수(Boolean algebra)를 사용하여 서로 다른 논리형 벡터를 결합하는 방법과 유용한 요약에 대해 배울 것입니다. 논리형 벡터로 구동되는 조건부 변경을 수행하기 위한 두 가지 유용한 함수인 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>와 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>으로 마무리할 것입니다.</p>
<section id="선수-지식" class="level3" data-number="12.1.1"><h3 data-number="12.1.1" class="anchored" data-anchor-id="선수-지식">
<span class="header-section-number">12.1.1</span> 선수 지식</h3>
<p>이 장에서 배울 대부분의 함수는 기본(base) R에서 제공하므로 tidyverse가 필요하지 않지만, 데이터 프레임으로 작업하기 위해 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> 및 친구들을 사용할 수 있도록 tidyverse를 로드할 것입니다. 또한 <code><a href="https://rdrr.io/pkg/nycflights13/man/flights.html">nycflights13::flights</a></code> 데이터셋에서 예제를 계속 가져올 것입니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 4.5.2</span></span>
<span><span class="co">#&gt; Warning: package 'readr' was built under R version 4.5.2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/nycflights13">nycflights13</a></span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그러나 더 많은 도구를 다루기 시작하면서 완벽한 실제 예제가 항상 있는 것은 아닙니다. 그래서 <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>로 더미 데이터를 만들기 시작할 것입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">11</span>, <span class="fl">13</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; [1]  2  4  6 10 14 22 26</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이렇게 하면 데이터 문제에 어떻게 적용될 수 있는지 보기 어렵게 만드는 대신 개별 함수를 설명하기가 더 쉬워집니다. 자유 부동(free-floating) 벡터에 수행하는 모든 조작은 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> 및 친구들을 사용하여 데이터 프레임 내부의 변수에 수행할 수 있다는 점을 기억하세요.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 7 × 2</span></span>
<span><span class="co">#&gt;       x     y</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1     2</span></span>
<span><span class="co">#&gt; 2     2     4</span></span>
<span><span class="co">#&gt; 3     3     6</span></span>
<span><span class="co">#&gt; 4     5    10</span></span>
<span><span class="co">#&gt; 5     7    14</span></span>
<span><span class="co">#&gt; 6    11    22</span></span>
<span><span class="co">#&gt; # ℹ 1 more row</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section></section><section id="비교" class="level2" data-number="12.2"><h2 data-number="12.2" class="anchored" data-anchor-id="비교">
<span class="header-section-number">12.2</span> 비교</h2>
<p>논리형 벡터를 만드는 매우 일반적인 방법은 <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code>, <code>==</code>를 사용한 숫자 비교를 통하는 것입니다. 지금까지 우리는 주로 <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> 내에서 논리형 변수를 일시적으로 생성했습니다. 계산되고, 사용된 다음, 버려졌습니다. 예를 들어 다음 필터는 대략 제시간에 도착하는 모든 주간 출발 항공편을 찾습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">dep_time</span> <span class="op">&gt;</span> <span class="fl">600</span> <span class="op">&amp;</span> <span class="va">dep_time</span> <span class="op">&lt;</span> <span class="fl">2000</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 172,286 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1      601            600         1      844            850</span></span>
<span><span class="co">#&gt; 2  2013     1     1      602            610        -8      812            820</span></span>
<span><span class="co">#&gt; 3  2013     1     1      602            605        -3      821            805</span></span>
<span><span class="co">#&gt; 4  2013     1     1      606            610        -4      858            910</span></span>
<span><span class="co">#&gt; 5  2013     1     1      606            610        -4      837            845</span></span>
<span><span class="co">#&gt; 6  2013     1     1      607            607         0      858            915</span></span>
<span><span class="co">#&gt; # ℹ 172,280 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이것이 단축키이며 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>로 기본 논리형 변수를 명시적으로 생성할 수 있다는 것을 아는 것이 유용합니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    daytime <span class="op">=</span> <span class="va">dep_time</span> <span class="op">&gt;</span> <span class="fl">600</span> <span class="op">&amp;</span> <span class="va">dep_time</span> <span class="op">&lt;</span> <span class="fl">2000</span>,</span>
<span>    approx_ontime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">20</span>,</span>
<span>    .keep <span class="op">=</span> <span class="st">"used"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 336,776 × 4</span></span>
<span><span class="co">#&gt;   dep_time arr_delay daytime approx_ontime</span></span>
<span><span class="co">#&gt;      &lt;int&gt;     &lt;dbl&gt; &lt;lgl&gt;   &lt;lgl&gt;        </span></span>
<span><span class="co">#&gt; 1      517        11 FALSE   TRUE         </span></span>
<span><span class="co">#&gt; 2      533        20 FALSE   FALSE        </span></span>
<span><span class="co">#&gt; 3      542        33 FALSE   FALSE        </span></span>
<span><span class="co">#&gt; 4      544       -18 FALSE   TRUE         </span></span>
<span><span class="co">#&gt; 5      554       -25 FALSE   FALSE        </span></span>
<span><span class="co">#&gt; 6      554        12 FALSE   TRUE         </span></span>
<span><span class="co">#&gt; # ℹ 336,770 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>중간 단계의 이름을 지정하면 코드를 읽고 각 단계가 올바르게 계산되었는지 확인하기가 더 쉽기 때문에 더 복잡한 로직에 특히 유용합니다.</p>
<p>종합하면 초기 필터는 다음과 동일합니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    daytime <span class="op">=</span> <span class="va">dep_time</span> <span class="op">&gt;</span> <span class="fl">600</span> <span class="op">&amp;</span> <span class="va">dep_time</span> <span class="op">&lt;</span> <span class="fl">2000</span>,</span>
<span>    approx_ontime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">20</span>,</span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">daytime</span> <span class="op">&amp;</span> <span class="va">approx_ontime</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="sec-fp-comparison" class="level3" data-number="12.2.1"><h3 data-number="12.2.1" class="anchored" data-anchor-id="sec-fp-comparison">
<span class="header-section-number">12.2.1</span> 부동 소수점 비교</h3>
<p>숫자와 함께 <code>==</code>를 사용할 때는 주의하세요. 예를 들어 이 벡터에는 숫자 1과 2가 포함된 것처럼 보입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">49</span> <span class="op">*</span> <span class="fl">49</span>, <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [1] 1 2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>하지만 동일성을 테스트하면 <code>FALSE</code>를 얻습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>무슨 일일까요? 컴퓨터는 고정된 소수점 자릿수로 숫자를 저장하므로 1/49 또는 <code>sqrt(2)</code>를 정확하게 표현할 방법이 없으며 후속 계산은 아주 약간 벗어나게 됩니다. <code>digits</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> 인수로 <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>를 호출하여 정확한 값을 볼 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span>, digits <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9999999999999999 2.0000000000000004</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>R이 왜 이 숫자를 반올림하는지 알 수 있습니다. 실제로는 예상한 것과 매우 가깝습니다.</p>
<p>이제 <code>==</code>가 실패하는 이유를 알았으니 어떻게 해야 할까요? 한 가지 옵션은 작은 차이를 무시하는 <code><a href="https://dplyr.tidyverse.org/reference/near.html">dplyr::near()</a></code>를 사용하는 것입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/near.html">near</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE TRUE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="sec-na-comparison" class="level3" data-number="12.2.2"><h3 data-number="12.2.2" class="anchored" data-anchor-id="sec-na-comparison">
<span class="header-section-number">12.2.2</span> 결측값</h3>
<p>결측값은 알 수 없음을 나타내므로 “전염성”이 있습니다. 알 수 없는 값과 관련된 거의 모든 연산도 알 수 없게 됩니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="cn">NA</span> <span class="op">&gt;</span> <span class="fl">5</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fl">10</span> <span class="op">==</span> <span class="cn">NA</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>가장 혼란스러운 결과는 이것입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="cn">NA</span> <span class="op">==</span> <span class="cn">NA</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>맥락을 조금 더 인위적으로 제공하면 이것이 왜 사실인지 이해하기 가장 쉽습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 메리의 나이를 모릅니다</span></span>
<span><span class="va">age_mary</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># 존의 나이를 모릅니다</span></span>
<span><span class="va">age_john</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># 메리와 존은 동갑입니까?</span></span>
<span><span class="va">age_mary</span> <span class="op">==</span> <span class="va">age_john</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co"># 우리는 모릅니다!</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>따라서 <code>dep_time</code>이 누락된 모든 항공편을 찾으려면 다음 코드는 작동하지 않습니다. <code>dep_time == NA</code>는 모든 단일 행에 대해 <code>NA</code>를 생성하고 <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>는 결측값을 자동으로 삭제하기 때문입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">dep_time</span> <span class="op">==</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 0 × 19</span></span>
<span><span class="co">#&gt; # ℹ 19 variables: year &lt;int&gt;, month &lt;int&gt;, day &lt;int&gt;, dep_time &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   sched_dep_time &lt;int&gt;, dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>대신 새로운 도구인 <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>가 필요합니다.</p>
</section><section id="is.na" class="level3" data-number="12.2.3"><h3 data-number="12.2.3" class="anchored" data-anchor-id="is.na">
<span class="header-section-number">12.2.3</span> <code>is.na()</code>
</h3>
<p><code>is.na(x)</code>는 모든 유형의 벡터와 작동하며 결측값에 대해서는 <code>TRUE</code>를 반환하고 그 외의 모든 것에 대해서는 <code>FALSE</code>를 반환합니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="cn">NA</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>를 사용하여 <code>dep_time</code>이 누락된 모든 행을 찾을 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dep_time</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8,255 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1       NA           1630        NA       NA           1815</span></span>
<span><span class="co">#&gt; 2  2013     1     1       NA           1935        NA       NA           2240</span></span>
<span><span class="co">#&gt; 3  2013     1     1       NA           1500        NA       NA           1825</span></span>
<span><span class="co">#&gt; 4  2013     1     1       NA            600        NA       NA            901</span></span>
<span><span class="co">#&gt; 5  2013     1     2       NA           1540        NA       NA           1747</span></span>
<span><span class="co">#&gt; 6  2013     1     2       NA           1620        NA       NA           1746</span></span>
<span><span class="co">#&gt; # ℹ 8,249 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>는 <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>에서도 유용할 수 있습니다. <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>는 일반적으로 모든 결측값을 끝에 배치하지만 먼저 <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>로 정렬하여 이 기본값을 재정의할 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="fl">1</span>, <span class="va">day</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">dep_time</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 842 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1      517            515         2      830            819</span></span>
<span><span class="co">#&gt; 2  2013     1     1      533            529         4      850            830</span></span>
<span><span class="co">#&gt; 3  2013     1     1      542            540         2      923            850</span></span>
<span><span class="co">#&gt; 4  2013     1     1      544            545        -1     1004           1022</span></span>
<span><span class="co">#&gt; 5  2013     1     1      554            600        -6      812            837</span></span>
<span><span class="co">#&gt; 6  2013     1     1      554            558        -4      740            728</span></span>
<span><span class="co">#&gt; # ℹ 836 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span>
<span></span>
<span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="fl">1</span>, <span class="va">day</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dep_time</span><span class="op">)</span><span class="op">)</span>, <span class="va">dep_time</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 842 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1       NA           1630        NA       NA           1815</span></span>
<span><span class="co">#&gt; 2  2013     1     1       NA           1935        NA       NA           2240</span></span>
<span><span class="co">#&gt; 3  2013     1     1       NA           1500        NA       NA           1825</span></span>
<span><span class="co">#&gt; 4  2013     1     1       NA            600        NA       NA            901</span></span>
<span><span class="co">#&gt; 5  2013     1     1      517            515         2      830            819</span></span>
<span><span class="co">#&gt; 6  2013     1     1      533            529         4      850            830</span></span>
<span><span class="co">#&gt; # ℹ 836 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><a href="missing-values.html" class="quarto-xref"><span>Chapter 18</span></a> 에서 결측값을 더 깊이 다루기 위해 다시 돌아올 것입니다.</p>
</section><section id="연습문제" class="level3" data-number="12.2.4"><h3 data-number="12.2.4" class="anchored" data-anchor-id="연습문제">
<span class="header-section-number">12.2.4</span> 연습문제</h3>
<ol type="1">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/near.html">dplyr::near()</a></code>는 어떻게 작동합니까? 소스 코드를 보려면 <code>near</code>를 입력하세요. <code>sqrt(2)^2</code>는 2에 가깝습니까?</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>를 함께 사용하여 <code>dep_time</code>, <code>sched_dep_time</code>, <code>dep_delay</code>의 결측값이 어떻게 연결되어 있는지 설명하세요.</li>
</ol></section></section><section id="부울-대수boolean-algebra" class="level2" data-number="12.3"><h2 data-number="12.3" class="anchored" data-anchor-id="부울-대수boolean-algebra">
<span class="header-section-number">12.3</span> 부울 대수(Boolean algebra)</h2>
<p>여러 논리형 벡터가 있으면 부울 대수를 사용하여 결합할 수 있습니다. R에서 <code>&amp;</code>는 “그리고(and)”, <code>|</code>는 “또는(or)”, <code>!</code>는 “아님(not)”, <code><a href="https://rdrr.io/r/base/Logic.html">xor()</a></code>는 배타적 또는(exclusive or)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>입니다. 예를 들어 <code>df |&gt; filter(!is.na(x))</code>는 <code>x</code>가 누락되지 않은 모든 행을 찾고 <code>df |&gt; filter(x &lt; -10 | x &gt; 0)</code>은 <code>x</code>가 -10보다 작거나 0보다 큰 모든 행을 찾습니다. <a href="#fig-bool-ops" class="quarto-xref">Figure&nbsp;<span>12.1</span></a> 는 일반적으로 사용되는 부울 연산의 예와 작동 방식을 보여줍니다.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-bool-ops" class="quarto-float quarto-figure quarto-figure-center anchored" alt="각각 주어진 논리 연산자를 설명하는 7개의 벤 다이어그램.  각 벤 다이어그램의 원(집합)은 x와 y를 나타냅니다. x &amp; !y는 x이지만 y는 없음; x &amp; y는 x와 y의 교집합; !x &amp; y는 y이지만 x는 없음; x는 x의 전체; xor(x, y)는 x와 y의  교집합을 제외한 모든 것; y는 y의 전체;  x | y는 모든 것입니다.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-bool-ops-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="diagrams/transform.png" class="img-fluid figure-img" alt="각각 주어진 논리 연산자를 설명하는 7개의 벤 다이어그램.  각 벤 다이어그램의 원(집합)은 x와 y를 나타냅니다. x &amp; !y는 x이지만 y는 없음; x &amp; y는 x와 y의 교집합; !x &amp; y는 y이지만 x는 없음; x는 x의 전체; xor(x, y)는 x와 y의  교집합을 제외한 모든 것; y는 y의 전체;  x | y는 모든 것입니다." width="395">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bool-ops-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;12.1: 일반적으로 사용되는 부울 연산 세트. <code>x</code>는 왼쪽 원, <code>y</code>는 오른쪽 원이며, 음영 처리된 영역은 각 연산자가 선택하는 부분을 보여줍니다.
</figcaption></figure>
</div>
</div>
</div>
<p><code>&amp;</code> 및 <code>|</code> 외에도 R에는 <code>&amp;&amp;</code> 및 <code>||</code>도 있습니다. dplyr 함수에서 사용하지 마세요! 이를 단락(short-circuiting) 연산자라고 하며 단일 <code>TRUE</code> 또는 <code>FALSE</code>만 반환합니다. 이것들은 데이터 과학이 아니라 프로그래밍에 중요합니다.</p>
<section id="sec-na-boolean" class="level3" data-number="12.3.1"><h3 data-number="12.3.1" class="anchored" data-anchor-id="sec-na-boolean">
<span class="header-section-number">12.3.1</span> 결측값</h3>
<p>부울 대수의 결측값 규칙은 언뜻 보기에 일관성이 없어 보이기 때문에 설명하기가 조금 까다롭습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    and <span class="op">=</span> <span class="va">x</span> <span class="op">&amp;</span> <span class="cn">NA</span>,</span>
<span>    or <span class="op">=</span> <span class="va">x</span> <span class="op">|</span> <span class="cn">NA</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;   x     and   or   </span></span>
<span><span class="co">#&gt;   &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;</span></span>
<span><span class="co">#&gt; 1 TRUE  NA    TRUE </span></span>
<span><span class="co">#&gt; 2 FALSE FALSE NA   </span></span>
<span><span class="co">#&gt; 3 NA    NA    NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>무슨 일이 일어나고 있는지 이해하려면 <code>NA | TRUE</code>(<code>NA</code> 또는 <code>TRUE</code>)에 대해 생각해 보세요. 논리형 벡터의 결측값은 값이 <code>TRUE</code> 또는 <code>FALSE</code>일 수 있음을 의미합니다. <code>TRUE | TRUE</code>와 <code>FALSE | TRUE</code>는 둘 중 하나가 적어도 <code>TRUE</code>이므로 둘 다 <code>TRUE</code>입니다. <code>NA | TRUE</code> 또한 <code>NA</code>가 <code>TRUE</code> 또는 <code>FALSE</code>일 수 있으므로 <code>TRUE</code>여야 합니다. 그러나 <code>NA | FALSE</code>는 <code>NA</code>가 <code>TRUE</code>인지 <code>FALSE</code>인지 모르기 때문에 <code>NA</code>입니다. 두 조건이 모두 충족되어야 한다는 점을 고려하면 <code>&amp;</code>에도 유사한 추론이 적용됩니다. 따라서 <code>NA &amp; TRUE</code>는 <code>NA</code>가 <code>TRUE</code> 또는 <code>FALSE</code>일 수 있으므로 <code>NA</code>이고, <code>NA &amp; FALSE</code>는 조건 중 하나가 적어도 <code>FALSE</code>이므로 <code>FALSE</code>입니다.</p>
</section><section id="sec-order-operations-boolean" class="level3" data-number="12.3.2"><h3 data-number="12.3.2" class="anchored" data-anchor-id="sec-order-operations-boolean">
<span class="header-section-number">12.3.2</span> 연산 순서</h3>
<p>연산 순서가 영어처럼 작동하지 않는다는 점에 유의하세요. 11월 또는 12월에 출발한 모든 항공편을 찾는 다음 코드를 살펴보세요:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="fl">11</span> <span class="op">|</span> <span class="va">month</span> <span class="op">==</span> <span class="fl">12</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>영어에서 말하는 것처럼 쓰고 싶을 수도 있습니다: “11월 또는 12월에 출발한 모든 항공편 찾기.”</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="fl">11</span> <span class="op">|</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 336,776 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1      517            515         2      830            819</span></span>
<span><span class="co">#&gt; 2  2013     1     1      533            529         4      850            830</span></span>
<span><span class="co">#&gt; 3  2013     1     1      542            540         2      923            850</span></span>
<span><span class="co">#&gt; 4  2013     1     1      544            545        -1     1004           1022</span></span>
<span><span class="co">#&gt; 5  2013     1     1      554            600        -6      812            837</span></span>
<span><span class="co">#&gt; 6  2013     1     1      554            558        -4      740            728</span></span>
<span><span class="co">#&gt; # ℹ 336,770 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이 코드는 오류가 발생하지 않지만 작동하지도 않는 것 같습니다. 무슨 일일까요? 여기서 R은 먼저 <code>month == 11</code>을 평가하여 <code>nov</code>라고 하는 논리형 벡터를 생성합니다. <code>nov | 12</code>를 계산합니다. 논리 연산자와 함께 숫자를 사용하면 0을 제외한 모든 것을 <code>TRUE</code>로 변환하므로 이는 <code>nov | TRUE</code>와 동일하며, 이는 항상 <code>TRUE</code>이므로 모든 행이 선택됩니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    nov <span class="op">=</span> <span class="va">month</span> <span class="op">==</span> <span class="fl">11</span>,</span>
<span>    final <span class="op">=</span> <span class="va">nov</span> <span class="op">|</span> <span class="fl">12</span>,</span>
<span>    .keep <span class="op">=</span> <span class="st">"used"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 336,776 × 3</span></span>
<span><span class="co">#&gt;   month nov   final</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt;</span></span>
<span><span class="co">#&gt; 1     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; 2     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; 3     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; 4     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; 5     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; 6     1 FALSE TRUE </span></span>
<span><span class="co">#&gt; # ℹ 336,770 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="in" class="level3" data-number="12.3.3"><h3 data-number="12.3.3" class="anchored" data-anchor-id="in">
<span class="header-section-number">12.3.3</span> <code>%in%</code>
</h3>
<p><code>==</code>와 <code>|</code>를 올바른 순서로 가져오는 문제를 피하는 쉬운 방법은 <code>%in%</code>를 사용하는 것입니다. <code>x %in% y</code>는 <code>x</code>와 길이가 같은 논리형 벡터를 반환하며 <code>x</code>의 값이 <code>y</code>의 어디에든 있을 때마다 <code>TRUE</code>입니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"e"</span>, <span class="st">"i"</span>, <span class="st">"o"</span>, <span class="st">"u"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>따라서 11월과 12월의 모든 항공편을 찾으려면 다음과 같이 쓸 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>%in%</code>은 <code>NA</code>에 대해 <code>==</code>와 다른 규칙을 따릅니다. <code>NA %in% NA</code>는 <code>TRUE</code>이기 때문입니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span><span class="op">)</span> <span class="op">==</span> <span class="cn">NA</span></span>
<span><span class="co">#&gt; [1] NA NA NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="cn">NA</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE  TRUE</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이것은 유용한 단축키가 될 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">dep_time</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">0800</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8,803 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1      800            800         0     1022           1014</span></span>
<span><span class="co">#&gt; 2  2013     1     1      800            810       -10      949            955</span></span>
<span><span class="co">#&gt; 3  2013     1     1       NA           1630        NA       NA           1815</span></span>
<span><span class="co">#&gt; 4  2013     1     1       NA           1935        NA       NA           2240</span></span>
<span><span class="co">#&gt; 5  2013     1     1       NA           1500        NA       NA           1825</span></span>
<span><span class="co">#&gt; 6  2013     1     1       NA            600        NA       NA            901</span></span>
<span><span class="co">#&gt; # ℹ 8,797 more rows</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, …</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="연습문제-1" class="level3" data-number="12.3.4"><h3 data-number="12.3.4" class="anchored" data-anchor-id="연습문제-1">
<span class="header-section-number">12.3.4</span> 연습문제</h3>
<ol type="1">
<li>
<code>arr_delay</code>는 누락되었지만 <code>dep_delay</code>는 누락되지 않은 모든 항공편을 찾으세요. <code>arr_time</code>이나 <code>sched_arr_time</code>은 누락되지 않았지만 <code>arr_delay</code>는 누락된 모든 항공편을 찾으세요.</li>
<li>
<code>dep_time</code>이 누락된 항공편은 몇 개입니까? 이 행들에서 다른 어떤 변수들이 누락되었습니까? 이 행들은 무엇을 나타낼 수 있습니까?</li>
<li>
<code>dep_time</code> 누락이 항공편 취소를 의미한다고 가정하고 일별 취소된 항공편 수를 살펴보세요. 패턴이 있습니까? 취소된 항공편 비율과 취소되지 않은 항공편의 평균 지연 사이에 연관성이 있습니까?</li>
</ol></section></section><section id="sec-logical-summaries" class="level2" data-number="12.4"><h2 data-number="12.4" class="anchored" data-anchor-id="sec-logical-summaries">
<span class="header-section-number">12.4</span> 요약(Summaries)</h2>
<p>다음 섹션에서는 논리형 벡터를 요약하는 데 유용한 몇 가지 기술을 설명합니다. 논리형 벡터와 구체적으로 작동하는 함수뿐만 아니라 숫자 벡터와 작동하는 함수도 사용할 수 있습니다.</p>
<section id="논리형-요약" class="level3" data-number="12.4.1"><h3 data-number="12.4.1" class="anchored" data-anchor-id="논리형-요약">
<span class="header-section-number">12.4.1</span> 논리형 요약</h3>
<p>두 가지 주요 논리형 요약이 있습니다: <code><a href="https://rdrr.io/r/base/any.html">any()</a></code>와 <code><a href="https://rdrr.io/r/base/all.html">all()</a></code>. <code>any(x)</code>는 <code>|</code>와 동일합니다. <code>x</code>에 <code>TRUE</code>가 하나라도 있으면 <code>TRUE</code>를 반환합니다. <code>all(x)</code>는 <code>&amp;</code>와 동일합니다. <code>x</code>의 모든 값이 <code>TRUE</code>인 경우에만 <code>TRUE</code>를 반환합니다. 대부분의 요약 함수와 마찬가지로 <code>na.rm = TRUE</code>로 결측값을 없앨 수 있습니다.</p>
<p>예를 들어 <code><a href="https://rdrr.io/r/base/all.html">all()</a></code>과 <code><a href="https://rdrr.io/r/base/any.html">any()</a></code>를 사용하여 모든 항공편이 출발 시 최대 1시간 지연되었는지 또는 도착 시 5시간 이상 지연된 항공편이 있는지 알아볼 수 있습니다. 그리고 <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>를 사용하면 일별로 수행할 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    all_delayed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">dep_delay</span> <span class="op">&lt;=</span> <span class="fl">60</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    any_long_delay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="va">arr_delay</span> <span class="op">&gt;=</span> <span class="fl">300</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 365 × 5</span></span>
<span><span class="co">#&gt;    year month   day all_delayed any_long_delay</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;         </span></span>
<span><span class="co">#&gt; 1  2013     1     1 FALSE       TRUE          </span></span>
<span><span class="co">#&gt; 2  2013     1     2 FALSE       TRUE          </span></span>
<span><span class="co">#&gt; 3  2013     1     3 FALSE       FALSE         </span></span>
<span><span class="co">#&gt; 4  2013     1     4 FALSE       FALSE         </span></span>
<span><span class="co">#&gt; 5  2013     1     5 FALSE       TRUE          </span></span>
<span><span class="co">#&gt; 6  2013     1     6 FALSE       FALSE         </span></span>
<span><span class="co">#&gt; # ℹ 359 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그러나 대부분의 경우 <code><a href="https://rdrr.io/r/base/any.html">any()</a></code>와 <code><a href="https://rdrr.io/r/base/all.html">all()</a></code>은 다소 조잡하며, 얼마나 많은 값이 <code>TRUE</code> 또는 <code>FALSE</code>인지에 대한 세부 정보를 얻을 수 있다면 좋을 것입니다. 그것은 우리를 숫자 요약으로 이끕니다.</p>
</section><section id="sec-numeric-summaries-of-logicals" class="level3" data-number="12.4.2"><h3 data-number="12.4.2" class="anchored" data-anchor-id="sec-numeric-summaries-of-logicals">
<span class="header-section-number">12.4.2</span> 논리형 벡터의 숫자 요약</h3>
<p>숫자 맥락에서 논리형 벡터를 사용할 때 <code>TRUE</code>는 1이 되고 <code>FALSE</code>는 0이 됩니다. 이것은 <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>과 <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>을 논리형 벡터와 함께 사용할 때 매우 유용하게 만듭니다. <code>sum(x)</code>는 <code>TRUE</code>의 개수를 제공하고 <code>mean(x)</code>는 <code>TRUE</code>의 비율을 제공합니다(<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>은 단지 <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>을 <code><a href="https://rdrr.io/r/base/length.html">length()</a></code>로 나눈 것이기 때문입니다).</p>
<p>예를 들어 이를 통해 출발 시 최대 1시간 지연된 항공편의 비율과 도착 시 5시간 이상 지연된 항공편의 수를 볼 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    proportion_delayed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">dep_delay</span> <span class="op">&lt;=</span> <span class="fl">60</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    count_long_delay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">arr_delay</span> <span class="op">&gt;=</span> <span class="fl">300</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 365 × 5</span></span>
<span><span class="co">#&gt;    year month   day proportion_delayed count_long_delay</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;              &lt;dbl&gt;            &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1              0.939                3</span></span>
<span><span class="co">#&gt; 2  2013     1     2              0.914                3</span></span>
<span><span class="co">#&gt; 3  2013     1     3              0.941                0</span></span>
<span><span class="co">#&gt; 4  2013     1     4              0.953                0</span></span>
<span><span class="co">#&gt; 5  2013     1     5              0.964                1</span></span>
<span><span class="co">#&gt; 6  2013     1     6              0.959                0</span></span>
<span><span class="co">#&gt; # ℹ 359 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="논리형-부분집합" class="level3" data-number="12.4.3"><h3 data-number="12.4.3" class="anchored" data-anchor-id="논리형-부분집합">
<span class="header-section-number">12.4.3</span> 논리형 부분집합</h3>
<p>요약에서 논리형 벡터를 사용하는 마지막 용도가 하나 있습니다. 논리형 벡터를 사용하여 단일 변수를 관심 있는 하위 집합으로 필터링할 수 있습니다. 이것은 기본(base) <code>[</code> (부분집합이라고 발음) 연산자를 사용하며, 이에 대해서는 <a href="base-R.html#sec-subset-many" class="quarto-xref"><span>Section 27.2</span></a> 에서 더 자세히 배울 것입니다.</p>
<p>실제로 지연된 항공편에 대한 평균 지연만 보고 싶다고 상상해 보세요. 그렇게 하는 한 가지 방법은 먼저 항공편을 필터링한 다음 평균 지연을 계산하는 것입니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">arr_delay</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    behind <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 365 × 5</span></span>
<span><span class="co">#&gt;    year month   day behind     n</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1   32.5   461</span></span>
<span><span class="co">#&gt; 2  2013     1     2   32.0   535</span></span>
<span><span class="co">#&gt; 3  2013     1     3   27.7   460</span></span>
<span><span class="co">#&gt; 4  2013     1     4   28.3   297</span></span>
<span><span class="co">#&gt; 5  2013     1     5   22.6   238</span></span>
<span><span class="co">#&gt; 6  2013     1     6   24.4   381</span></span>
<span><span class="co">#&gt; # ℹ 359 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이것은 작동하지만 일찍 도착한 항공편에 대한 평균 지연도 계산하고 싶다면 어떻게 해야 할까요? 별도의 필터 단계를 수행한 다음 두 데이터 프레임을 결합하는 방법을 파악해야 합니다<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. 대신 <code>[</code>를 사용하여 인라인 필터링을 수행할 수 있습니다: <code>arr_delay[arr_delay &gt; 0]</code>은 양의 도착 지연만 산출합니다.</p>
<p>결과는 다음과 같습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    behind <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">[</span><span class="va">arr_delay</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    ahead <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">[</span><span class="va">arr_delay</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 365 × 6</span></span>
<span><span class="co">#&gt;    year month   day behind ahead     n</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1   32.5 -12.5   842</span></span>
<span><span class="co">#&gt; 2  2013     1     2   32.0 -14.3   943</span></span>
<span><span class="co">#&gt; 3  2013     1     3   27.7 -18.2   914</span></span>
<span><span class="co">#&gt; 4  2013     1     4   28.3 -17.0   915</span></span>
<span><span class="co">#&gt; 5  2013     1     5   22.6 -14.0   720</span></span>
<span><span class="co">#&gt; 6  2013     1     6   24.4 -13.6   832</span></span>
<span><span class="co">#&gt; # ℹ 359 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>또한 그룹 크기의 차이에 유의하세요. 첫 번째 청크에서 <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code>은 일별 지연된 항공편 수를 제공합니다. 두 번째에서는 <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code>이 전체 항공편 수를 제공합니다.</p>
</section><section id="연습문제-2" class="level3" data-number="12.4.4"><h3 data-number="12.4.4" class="anchored" data-anchor-id="연습문제-2">
<span class="header-section-number">12.4.4</span> 연습문제</h3>
<ol type="1">
<li>
<code>sum(is.na(x))</code>는 무엇을 말해줍니까? <code>mean(is.na(x))</code>는 어떻습니까?</li>
<li>논리형 벡터에 적용될 때 <code><a href="https://rdrr.io/r/base/prod.html">prod()</a></code>는 무엇을 반환합니까? 어떤 논리형 요약 함수와 동일합니까? 논리형 벡터에 적용될 때 <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>은 무엇을 반환합니까? 어떤 논리형 요약 함수와 동일합니까? 문서를 읽고 몇 가지 실험을 수행하세요.</li>
</ol></section></section><section id="조건부-변환" class="level2" data-number="12.5"><h2 data-number="12.5" class="anchored" data-anchor-id="조건부-변환">
<span class="header-section-number">12.5</span> 조건부 변환</h2>
<p>논리형 벡터의 가장 강력한 기능 중 하나는 조건부 변환, 즉 조건 x에 대해 한 가지 작업을 수행하고 조건 y에 대해 다른 작업을 수행하는 데 사용하는 것입니다. 이를 위한 두 가지 중요한 도구는 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>와 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>입니다.</p>
<section id="if_else" class="level3" data-number="12.5.1"><h3 data-number="12.5.1" class="anchored" data-anchor-id="if_else">
<span class="header-section-number">12.5.1</span> <code>if_else()</code>
</h3>
<p>조건이 <code>TRUE</code>일 때 한 값을 사용하고 <code>FALSE</code>일 때 다른 값을 사용하려면 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">dplyr::if_else()</a></code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>를 사용할 수 있습니다. 항상 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>의 처음 세 인수를 사용합니다. 첫 번째 인수 <code>condition</code>은 논리형 벡터이고, 두 번째 <code>true</code>는 조건이 참일 때 출력을 제공하고, 세 번째 <code>false</code>는 조건이 거짓일 때 출력을 제공합니다.</p>
<p>숫자 벡터에 “+ve”(양수) 또는 “-ve”(음수)로 레이블을 지정하는 간단한 예제로 시작하겠습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">3</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="st">"+ve"</span>, <span class="st">"-ve"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" "-ve" "+ve" "+ve" "+ve" NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>입력이 <code>NA</code>인 경우 사용될 선택적 네 번째 인수 <code>missing</code>이 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="st">"+ve"</span>, <span class="st">"-ve"</span>, <span class="st">"???"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" "-ve" "+ve" "+ve" "+ve" "???"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>true</code> 및 <code>false</code> 인수에 벡터를 사용할 수도 있습니다. 예를 들어 이를 통해 <code><a href="https://rdrr.io/r/base/MathFun.html">abs()</a></code>의 최소 구현을 만들 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="op">-</span><span class="va">x</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  3  2  1  0  1  2  3 NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>지금까지 모든 인수는 동일한 벡터를 사용했지만 물론 섞어서 사용할 수 있습니다. 예를 들어 다음과 같이 <code><a href="https://dplyr.tidyverse.org/reference/coalesce.html">coalesce()</a></code>의 간단한 버전을 구현할 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="cn">NA</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span>, <span class="va">y1</span>, <span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3 1 2 6</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>위의 레이블링 예제에서 작은 부적절함을 눈치챘을 수 있습니다. 0은 양수도 음수도 아닙니다. <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>를 추가하여 이를 해결할 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"0"</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="st">"-ve"</span>, <span class="st">"+ve"</span><span class="op">)</span>, <span class="st">"???"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" "0"   "+ve" "+ve" "+ve" "???"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이것은 이미 읽기가 조금 어렵고 조건이 더 많으면 더 어려워질 것이라고 상상할 수 있습니다. 대신 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">dplyr::case_when()</a></code>으로 전환할 수 있습니다.</p>
</section><section id="case_when" class="level3" data-number="12.5.2"><h3 data-number="12.5.2" class="anchored" data-anchor-id="case_when">
<span class="header-section-number">12.5.2</span> <code>case_when()</code>
</h3>
<p>dplyr의 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>은 SQL의 <code>CASE</code> 문에서 영감을 받았으며 다양한 조건에 대해 다른 계산을 수행하는 유연한 방법을 제공합니다. 불행히도 tidyverse에서 사용할 다른 어떤 것과도 비슷해 보이지 않는 특별한 구문을 가지고 있습니다. <code>condition ~ output</code>과 같은 쌍을 취합니다. <code>condition</code>은 논리형 벡터여야 합니다. <code>TRUE</code>이면 <code>output</code>이 사용됩니다.</p>
<p>즉, 이전의 중첩된 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>를 다음과 같이 다시 만들 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">3</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op">==</span> <span class="fl">0</span>   <span class="op">~</span> <span class="st">"0"</span>,</span>
<span>  <span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>    <span class="op">~</span> <span class="st">"-ve"</span>, </span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>    <span class="op">~</span> <span class="st">"+ve"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="st">"???"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" "0"   "+ve" "+ve" "+ve" "???"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이것은 더 많은 코드이지만 더 명시적입니다.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>이 어떻게 작동하는지 설명하기 위해 몇 가지 더 간단한 경우를 살펴보겠습니다. 일치하는 사례가 없으면 출력은 <code>NA</code>를 얻습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"-ve"</span>,</span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"+ve"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" NA    "+ve" "+ve" "+ve" NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>“기본값”/포괄적(catch all) 값을 만들려면 <code>.default</code>를 사용하세요:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"-ve"</span>,</span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"+ve"</span>,</span>
<span>  .default <span class="op">=</span> <span class="st">"???"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "-ve" "-ve" "-ve" "???" "+ve" "+ve" "+ve" "???"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그리고 여러 조건이 일치하면 첫 번째 조건만 사용됩니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"+ve"</span>,</span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"big"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA    NA    NA    NA    "+ve" "+ve" "+ve" NA</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>와 마찬가지로 <code>~</code>의 양쪽에서 변수를 사용할 수 있으며 문제에 필요한 대로 변수를 섞어서 사용할 수 있습니다. 예를 들어 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>을 사용하여 도착 지연에 대해 사람이 읽을 수 있는 레이블을 제공할 수 있습니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">flights</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    status <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span>      <span class="op">~</span> <span class="st">"cancelled"</span>,</span>
<span>      <span class="va">arr_delay</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">30</span>       <span class="op">~</span> <span class="st">"very early"</span>,</span>
<span>      <span class="va">arr_delay</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">15</span>       <span class="op">~</span> <span class="st">"early"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">arr_delay</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">15</span>  <span class="op">~</span> <span class="st">"on time"</span>,</span>
<span>      <span class="va">arr_delay</span> <span class="op">&lt;</span> <span class="fl">60</span>        <span class="op">~</span> <span class="st">"late"</span>,</span>
<span>      <span class="va">arr_delay</span> <span class="op">&lt;</span> <span class="cn">Inf</span>       <span class="op">~</span> <span class="st">"very late"</span>,</span>
<span>    <span class="op">)</span>,</span>
<span>    .keep <span class="op">=</span> <span class="st">"used"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 336,776 × 2</span></span>
<span><span class="co">#&gt;   arr_delay status </span></span>
<span><span class="co">#&gt;       &lt;dbl&gt; &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1        11 on time</span></span>
<span><span class="co">#&gt; 2        20 late   </span></span>
<span><span class="co">#&gt; 3        33 late   </span></span>
<span><span class="co">#&gt; 4       -18 early  </span></span>
<span><span class="co">#&gt; 5       -25 early  </span></span>
<span><span class="co">#&gt; 6        12 on time</span></span>
<span><span class="co">#&gt; # ℹ 336,770 more rows</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이런 종류의 복잡한 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> 문을 작성할 때는 주의하세요. 저의 처음 두 번의 시도는 <code>&lt;</code>와 <code>&gt;</code>를 섞어 사용했고 계속해서 겹치는 조건을 실수로 만들었습니다.</p>
</section><section id="호환-가능한-유형" class="level3" data-number="12.5.3"><h3 data-number="12.5.3" class="anchored" data-anchor-id="호환-가능한-유형">
<span class="header-section-number">12.5.3</span> 호환 가능한 유형</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>와 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> 모두 출력에 <strong>호환 가능한(compatible)</strong> 유형이 필요합니다. 호환되지 않으면 다음과 같은 오류가 표시됩니다:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="st">"a"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `if_else()`:</span></span>
<span><span class="co">#&gt; ! Can't combine `true` &lt;character&gt; and `false` &lt;double&gt;.</span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">1</span> <span class="op">~</span> <span class="cn">TRUE</span>,  </span>
<span>  <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span>  <span class="op">~</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html">now</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `case_when()`:</span></span>
<span><span class="co">#&gt; ! Can't combine `..1 (right)` &lt;logical&gt; and `..2 (right)` &lt;datetime&lt;local&gt;&gt;.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>전반적으로 한 유형의 벡터를 다른 유형으로 자동 변환하는 것은 오류의 일반적인 원인이기 때문에 호환되는 유형은 상대적으로 적습니다. 다음은 호환되는 가장 중요한 사례입니다:</p>
<ul>
<li>
<a href="#sec-numeric-summaries-of-logicals" class="quarto-xref"><span>Section 12.4.2</span></a> 에서 논의했듯이 숫자형 벡터와 논리형 벡터는 호환됩니다.</li>
<li>문자열과 팩터(<a href="factors.html" class="quarto-xref"><span>Chapter 16</span></a>)는 호환됩니다. 팩터를 제한된 값 집합을 가진 문자열로 생각할 수 있기 때문입니다.</li>
<li>
<a href="datetimes.html" class="quarto-xref"><span>Chapter 17</span></a> 에서 논의할 날짜와 날짜-시간은 호환됩니다. 날짜를 날짜-시간의 특수한 경우로 생각할 수 있기 때문입니다.</li>
<li>기술적으로 논리형 벡터인 <code>NA</code>는 모든 것과 호환됩니다. 모든 벡터에는 결측값을 나타내는 방법이 있기 때문입니다.</li>
</ul>
<p>이러한 규칙을 암기할 필요는 없지만 tidyverse 전체에 일관되게 적용되므로 시간이 지남에 따라 제2의 천성이 될 것입니다.</p>
</section><section id="연습문제-3" class="level3" data-number="12.5.4"><h3 data-number="12.5.4" class="anchored" data-anchor-id="연습문제-3">
<span class="header-section-number">12.5.4</span> 연습문제</h3>
<ol type="1">
<li><p>숫자는 2로 나누어 떨어지면 짝수이며, R에서는 <code>x %% 2 == 0</code>으로 알 수 있습니다. 이 사실과 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>를 사용하여 0에서 20 사이의 각 숫자가 짝수인지 홀수인지 확인하세요.</p></li>
<li><p><code>x &lt;- c("Monday", "Saturday", "Wednesday")</code>와 같은 요일 벡터가 주어지면 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> 문을 사용하여 주말이나 평일로 레이블을 지정하세요.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>를 사용하여 <code>x</code>라는 숫자 벡터의 절대값을 계산하세요.</p></li>
<li><p><code>flights</code>의 <code>month</code> 및 <code>day</code> 열을 사용하여 중요한 미국 공휴일(예: 새해 첫날, 7월 4일, 추수감사절, 크리스마스)에 레이블을 지정하는 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> 문을 작성하세요. 먼저 <code>TRUE</code> 또는 <code>FALSE</code>인 논리형 열을 만든 다음 공휴일 이름을 제공하거나 <code>NA</code>인 문자 열을 만드세요.</p></li>
</ol></section></section><section id="요약" class="level2" data-number="12.6"><h2 data-number="12.6" class="anchored" data-anchor-id="요약">
<span class="header-section-number">12.6</span> 요약</h2>
<p>논리형 벡터의 정의는 각 값이 <code>TRUE</code>, <code>FALSE</code> 또는 <code>NA</code>여야 하므로 간단합니다. 그러나 논리형 벡터는 엄청난 힘을 제공합니다. 이 장에서는 <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>, <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>로 논리형 벡터를 만드는 방법, <code>!</code>, <code>&amp;</code>, <code>|</code>로 결합하는 방법, <code><a href="https://rdrr.io/r/base/any.html">any()</a></code>, <code><a href="https://rdrr.io/r/base/all.html">all()</a></code>, <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>으로 요약하는 방법을 배웠습니다. 또한 논리형 벡터의 값에 따라 값을 반환할 수 있는 강력한 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> 및 <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> 함수를 배웠습니다.</p>
<p>다음 장들에서 논리형 벡터를 계속해서 보게 될 것입니다. 예를 들어 <a href="strings.html" class="quarto-xref"><span>Chapter 14</span></a> 에서는 <code>pattern</code>과 일치하는 <code>x</code> 요소에 대해 <code>TRUE</code>인 논리형 벡터를 반환하는 <code>str_detect(x, pattern)</code>에 대해 배우고, <a href="datetimes.html" class="quarto-xref"><span>Chapter 17</span></a> 에서는 날짜와 시간의 비교에서 논리형 벡터를 생성할 것입니다. 하지만 지금은 다음으로 가장 중요한 유형의 벡터인 수치형 벡터로 넘어가겠습니다.</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>R은 일반적으로 사용자를 위해 print를 호출하지만(<code>x</code>는 <code>print(x)</code>의 단축키임), 다른 인수를 제공하려는 경우 명시적으로 호출하는 것이 유용합니다.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>즉, <code>xor(x, y)</code>는 x가 참이거나 y가 참이지만 둘 다 참은 아닌 경우 참입니다. 이것이 우리가 일반적으로 영어에서 “or”를 사용하는 방식입니다. “아이스크림이나 케이크 드실래요?”라는 질문에 “둘 다”는 일반적으로 허용되는 대답이 아닙니다.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="joins.html" class="quarto-xref"><span>Chapter 19</span></a> 에서 다룰 것입니다.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>dplyr의 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>는 기본 R의 <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>와 매우 유사합니다. <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>보다 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>의 두 가지 주요 장점이 있습니다: 결측값에 대해 어떤 일이 발생해야 하는지 선택할 수 있고, 변수 유형이 호환되지 않는 경우 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>가 의미 있는 오류를 제공할 가능성이 훨씬 더 높습니다.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/r4ds\.hadley\.nz\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./transform.html" class="pagination-link" aria-label="변형 (Transform)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">변형 (Transform)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./numbers.html" class="pagination-link" aria-label="숫자">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">숫자</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>R for Data Science (2e) was written by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hadley/r4ds/edit/main/logicals.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hadley/r4ds/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>